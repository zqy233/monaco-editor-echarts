import{d as z,r as c,w as W,n as E,a,o as p,c as g,b as o,e as l,f as h,u as n,g as H,i as J,h as K,j as Q,k as X,l as Y,m as x,p as N,F as $,q as U,s as Z,t as ee}from"./index-f03f38a3.js";import{_ as te,u as oe}from"./index-08142931.js";import{setToken as ne,getIssues as le,getAllIssuesComments as se,createIssues as ae,openGithub as ie}from"./githubApi-1bd3da6d.js";import"./index-d6644c27.js";const ce={class:"chartPreviewImg"},re=["src"],ue=z({__name:"chartPreviewImg",props:{option:null},setup(O){const _=O,y=c(null),r=c("");let s;const d=c(!0),f=()=>{s.resize()},k=()=>{_.option&&(s?(window.removeEventListener("resize",f),s.clear(),s.setOption(_.option)):(s=J(y.value),s.setOption(_.option),s.on("finished",()=>{r.value||(r.value=s.getConnectedDataURL({type:"png"}),E(()=>{d.value=!1}))})),window.addEventListener("resize",f))};return W(()=>_.option,()=>{E(()=>{k()})},{immediate:!0}),(w,b)=>{const C=a("el-skeleton-item"),T=a("el-skeleton");return p(),g("div",ce,[o(T,{class:"w100h100",loading:n(d),animated:""},{template:l(()=>[o(C,{variant:"image",class:"w100h100"})]),default:l(()=>[h("img",{src:n(r),class:"previewImg"},null,8,re)]),_:1},8,["loading"]),n(r)?H("",!0):(p(),g("div",{key:0,class:"chartPreviewImgDom",ref_key:"chart",ref:y},null,512))])}}});const de=te(ue,[["__scopeId","data-v-376e32c6"]]),me={class:"dialog-footer"},pe={class:"echarts-demo-list"},_e={class:"echarts-demo-title"},fe={class:"echarts-demo-item"},ke=z({__name:"index",setup(O){const _=oe(),y=K();let r=0;const s=i=>{_.setOption(i),r=document.body.scrollTop||document.documentElement.scrollTop,y.push({path:"/echarts-code"})},d=c([]),f=c([]),k=async i=>{d.value=await le(i),i?b.value.find(u=>u.name===i).title=`${i}（${d.value[0].comments}）`:(b.value=d.value.map(u=>({title:`${u.title}（${u.comments}）`,name:u.title})),b.value.unshift({title:"全部",name:""}));const t=await se(d.value);f.value=t.value};Q(async()=>{await ne(),f.value.length||k("")});const w=c(""),b=c([]),C=(i,t)=>{t==="add"&&(v.value=!0)},T=async i=>{k(i.props.name)},v=c(!1),m=c({label:"柱图",description:"这个问题用于存储所有柱图option"}),A=X({label:[{required:!0,message:"名称不能为空",trigger:"blur"}]}),I=c(!1),B=async()=>{I.value=!0,await ae(m.value.label,m.value.description),v.value=!1,I.value=!1},F=`option = {
  xAxis: {
    type: 'category',
    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
  },
  yAxis: {
    type: 'value'
  },
  series: [
    {
      data: [150, 230, 224, 218, 135, 147, 260],
      type: 'line'
    }
  ]
};`;return Y(()=>{E(()=>{document.body.scrollTop=r,document.documentElement.scrollTop=r})}),(i,t)=>{const u=a("el-input"),P=a("el-form-item"),L=a("el-form"),V=a("el-button"),D=a("el-dialog"),R=a("el-button-group"),q=a("el-tab-pane"),M=a("el-tabs"),j=a("el-tooltip"),G=de;return p(),g($,null,[o(D,{modelValue:n(v),"onUpdate:modelValue":t[3]||(t[3]=e=>N(v)?v.value=e:null),title:"新建标签卡（新建echarts类别）"},{footer:l(()=>[h("span",me,[o(V,{onClick:t[2]||(t[2]=e=>v.value=!1)},{default:l(()=>[x("取消")]),_:1}),o(V,{type:"primary",onClick:B,loading:n(I)},{default:l(()=>[x(" 确认 ")]),_:1},8,["loading"])])]),default:l(()=>[o(L,{model:n(m),rules:n(A),"status-icon":""},{default:l(()=>[o(P,{label:"名称","label-width":80,prop:"label"},{default:l(()=>[o(u,{modelValue:n(m).label,"onUpdate:modelValue":t[0]||(t[0]=e=>n(m).label=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(P,{label:"描述","label-width":80},{default:l(()=>[o(u,{modelValue:n(m).description,"onUpdate:modelValue":t[1]||(t[1]=e=>n(m).description=e),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),o(R,{class:"btns"},{default:l(()=>[o(V,{onClick:n(ie)},{default:l(()=>[x("github仓库地址")]),_:1},8,["onClick"]),o(V,{onClick:t[4]||(t[4]=e=>s(F))},{default:l(()=>[x("新建echarts option")]),_:1})]),_:1}),o(M,{modelValue:n(w),"onUpdate:modelValue":t[5]||(t[5]=e=>N(w)?w.value=e:null),type:"card",editable:"","tab-position":"bottom",onEdit:C,onTabClick:T},{default:l(()=>[(p(!0),g($,null,U(n(b),(e,S)=>(p(),Z(q,{key:e.title,label:e.title,name:e.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),h("section",pe,[(p(!0),g($,null,U(n(f),(e,S)=>(p(),g("div",{key:S,class:"echarts-demo"},[o(j,{class:"box-item",effect:"dark",content:e.title},{default:l(()=>[h("p",_e,ee(e.title),1)]),_:2},1032,["content"]),h("div",fe,[o(G,{option:e.option,onClick:ve=>s(e.optionStr)},null,8,["option","onClick"])])]))),128))])],64)}}});export{ke as default};
