import{d as U,r,w as H,n as $,a,o as _,c as b,b as o,e as n,f as w,u as l,g as J,i as K,h as Q,j as X,k as Y,l as Z,m as y,p as P,F as I,q as S,s as ee,t as te}from"./index-c18eebb5.js";import{_ as oe,u as ne}from"./index-1ce46691.js";import{setToken as le,getIssues as se,getAllIssuesComments as ae,createIssues as ie,openGithub as ce}from"./githubApi-7f5aabbf.js";import"./index-d6644c27.js";const re={class:"chartPreviewImg"},ue=["src"],de=U({__name:"chartPreviewImg",props:{option:null},setup(E){const f=E,V=r(null),u=r("");let s;const d=r(!0),v=()=>{s.resize()},C=()=>{f.option&&(s?(window.removeEventListener("resize",v),s.clear(),s.setOption(f.option)):(s=K(V.value),s.setOption(f.option),s.on("finished",()=>{u.value||(u.value=s.getConnectedDataURL({type:"png"}),$(()=>{d.value=!1}))})),window.addEventListener("resize",v))};return H(()=>f.option,()=>{$(()=>{C()})},{immediate:!0}),(N,h)=>{const m=a("el-skeleton-item"),T=a("el-skeleton");return _(),b("div",re,[o(T,{class:"w100h100",loading:l(d),animated:""},{template:n(()=>[o(m,{variant:"image",class:"w100h100"})]),default:n(()=>[w("img",{src:l(u),class:"previewImg"},null,8,ue)]),_:1},8,["loading"]),l(u)?J("",!0):(_(),b("div",{key:0,class:"chartPreviewImgDom",ref_key:"chart",ref:V},null,512))])}}});const me=oe(de,[["__scopeId","data-v-376e32c6"]]),pe={class:"dialog-footer"},_e={class:"echarts-demo-list"},fe={class:"echarts-demo-title"},ve={class:"echarts-demo-item"},we=U({__name:"index",setup(E){const f=ne(),V=Q();let u=0;const s=i=>{f.setOption(i),u=document.body.scrollTop||document.documentElement.scrollTop,console.log(111,u),V.push({path:"/echarts-code"})},d=r([]),v=r([]),C=async i=>{d.value=await se(i),i?m.value.find(c=>c.name===i).title=`${i}（${d.value[0].comments}）`:(m.value=d.value.map(c=>({title:`${c.title}（${c.comments}）`,name:c.title})),m.value.unshift({title:"全部",name:""}));const t=await ae(d.value);v.value=t.value};X(async()=>{await le(),v.value.length||C("")});let N=2;const h=r(""),m=r([{title:"",name:""}]),T=(i,t)=>{if(t==="add"){const c=`${++N}`;m.value.push({title:"New Tab",name:"1"}),h.value=c}},z=async i=>{C(i.props.name)},g=r(!1),p=r({label:"柱图",description:"这个问题用于存储所有柱图option"}),A=Y({label:[{required:!0,message:"名称不能为空",trigger:"blur"}]}),x=r(!1),B=async()=>{x.value=!0,await ie(p.value.label,p.value.description),g.value=!1,x.value=!1},F=`option = {
  xAxis: {
    type: 'category',
    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
  },
  yAxis: {
    type: 'value'
  },
  series: [
    {
      data: [150, 230, 224, 218, 135, 147, 260],
      type: 'line'
    }
  ]
};`;return Z(()=>{$(()=>{document.body.scrollTop=u,document.documentElement.scrollTop=u})}),(i,t)=>{const c=a("el-input"),O=a("el-form-item"),L=a("el-form"),k=a("el-button"),D=a("el-dialog"),R=a("el-button-group"),q=a("el-tab-pane"),M=a("el-tabs"),j=a("el-tooltip"),G=me;return _(),b(I,null,[o(D,{modelValue:l(g),"onUpdate:modelValue":t[3]||(t[3]=e=>P(g)?g.value=e:null),title:"新建echarts类别"},{footer:n(()=>[w("span",pe,[o(k,{onClick:t[2]||(t[2]=e=>g.value=!1)},{default:n(()=>[y("取消")]),_:1}),o(k,{type:"primary",onClick:B,loading:l(x)},{default:n(()=>[y(" 确认 ")]),_:1},8,["loading"])])]),default:n(()=>[o(L,{model:l(p),rules:l(A),"status-icon":""},{default:n(()=>[o(O,{label:"名称","label-width":80,prop:"label"},{default:n(()=>[o(c,{modelValue:l(p).label,"onUpdate:modelValue":t[0]||(t[0]=e=>l(p).label=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(O,{label:"描述","label-width":80},{default:n(()=>[o(c,{modelValue:l(p).description,"onUpdate:modelValue":t[1]||(t[1]=e=>l(p).description=e),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),o(R,{class:"btns"},{default:n(()=>[o(k,{onClick:l(ce)},{default:n(()=>[y("github仓库地址")]),_:1},8,["onClick"]),o(k,{onClick:t[4]||(t[4]=e=>g.value=!0)},{default:n(()=>[y("新建echarts类别")]),_:1}),o(k,{onClick:t[5]||(t[5]=e=>s(F))},{default:n(()=>[y("新建echarts option")]),_:1})]),_:1}),o(M,{modelValue:l(h),"onUpdate:modelValue":t[6]||(t[6]=e=>P(h)?h.value=e:null),type:"card",editable:"",class:"demo-tabs",onEdit:T,onTabClick:z},{default:n(()=>[(_(!0),b(I,null,S(l(m),e=>(_(),ee(q,{key:e.title,label:e.title,name:e.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),w("section",_e,[(_(!0),b(I,null,S(l(v),(e,W)=>(_(),b("div",{key:W,class:"echarts-demo"},[o(j,{class:"box-item",effect:"dark",content:e.title},{default:n(()=>[w("p",fe,te(e.title),1)]),_:2},1032,["content"]),w("div",ve,[o(G,{option:e.option,onClick:ge=>s(e.optionStr)},null,8,["option","onClick"])])]))),128))])],64)}}});export{we as default};
