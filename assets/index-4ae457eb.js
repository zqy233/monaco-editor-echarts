import{d as N,r as i,w as J,a as s,o as m,c as h,b as o,e as l,u as n,f as F,g as U,n as B,h as K,i as Q,j as X,k as Y,l as V,m as x,p as P,F as $,q as S,t as Z}from"./index-8792b52d.js";import{_ as ee,u as te}from"./index-34747ddc.js";import{setToken as oe,getIssues as ne,getAllIssuesComments as le,createIssues as se,openGithub as ae}from"./githubApi-b4cfb9f9.js";import"./index-d6644c27.js";const ie={class:"chartPreviewImg"},ce=["src"],ue=N({__name:"chartPreviewImg",props:{option:null},setup(C){const f=C,k=i(null),c=i(""),y=i(!0),v=()=>{c.value||(c.value=k.value.getConnectedDataURL({type:"png"}),B(()=>{y.value=!1}))};return J(()=>f.option,()=>{var p,g,r;(p=f.option)!=null&&p.series&&Array.isArray((g=f.option)==null?void 0:g.series)&&((r=f.option)==null||r.series.forEach(u=>{u.type==="liquidFill"&&(u.waveAnimation=!1)}))},{immediate:!0,deep:!0}),(p,g)=>{const r=s("el-skeleton-item"),u=s("el-skeleton"),T=s("v-chart");return m(),h("div",ie,[o(u,{class:"w100h100",loading:n(y),animated:""},{template:l(()=>[o(r,{variant:"image",class:"w100h100"})]),default:l(()=>[n(c)?(m(),h("img",{key:0,src:n(c),class:"previewImg"},null,8,ce)):F("",!0)]),_:1},8,["loading"]),n(c)?F("",!0):(m(),U(T,{key:0,class:"chartPreviewImgDom",option:C.option,ref_key:"vchart",ref:k,onFinished:v},null,8,["option"]))])}}});const re=ee(ue,[["__scopeId","data-v-ed2d10dd"]]),de={class:"dialog-footer"},me={class:"echarts-demo-list"},pe={class:"echarts-demo-title"},_e={class:"echarts-demo-item"},ye=N({__name:"index",setup(C){const f=te(),k=K();let c=0;const y=a=>{f.setOption(a),c=document.body.scrollTop||document.documentElement.scrollTop,k.push({path:"/echarts-code"})},v=i([]),p=i([]),g=async a=>{v.value=await ne(a),a?u.value.find(d=>d.name===a).title=`${a}（${v.value[0].comments}）`:(u.value=v.value.map(d=>({title:`${d.title}（${d.comments}）`,name:d.title})),u.value.unshift({title:"全部",name:""}));const t=await le(v.value);p.value=t.value};Q(async()=>{await oe(),p.value.length||g("")});const r=i(""),u=i([]),T=(a,t)=>{t==="add"&&(b.value=!0)},O=async a=>{g(a.props.name)},b=i(!1),_=i({label:"柱图",description:"这个问题用于存储所有柱图option"}),q=X({label:[{required:!0,message:"名称不能为空",trigger:"blur"}]}),I=i(!1),D=async()=>{I.value=!0,await se(_.value.label,_.value.description),b.value=!1,I.value=!1},R=`option = {
  xAxis: {
    type: 'category',
    data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
  },
  yAxis: {
    type: 'value'
  },
  series: [
    {
      data: [150, 230, 224, 218, 135, 147, 260],
      type: 'line'
    }
  ]
};`;return Y(()=>{B(()=>{document.body.scrollTop=c,document.documentElement.scrollTop=c})}),(a,t)=>{const d=s("el-input"),A=s("el-form-item"),L=s("el-form"),w=s("el-button"),M=s("el-dialog"),j=s("el-button-group"),G=s("el-tab-pane"),W=s("el-tabs"),z=s("el-tooltip"),H=re;return m(),h($,null,[o(M,{modelValue:n(b),"onUpdate:modelValue":t[3]||(t[3]=e=>P(b)?b.value=e:null),title:"新建标签卡（新建echarts类别）"},{footer:l(()=>[V("span",de,[o(w,{onClick:t[2]||(t[2]=e=>b.value=!1)},{default:l(()=>[x("取消")]),_:1}),o(w,{type:"primary",onClick:D,loading:n(I)},{default:l(()=>[x(" 确认 ")]),_:1},8,["loading"])])]),default:l(()=>[o(L,{model:n(_),rules:n(q),"status-icon":""},{default:l(()=>[o(A,{label:"名称","label-width":80,prop:"label"},{default:l(()=>[o(d,{modelValue:n(_).label,"onUpdate:modelValue":t[0]||(t[0]=e=>n(_).label=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(A,{label:"描述","label-width":80},{default:l(()=>[o(d,{modelValue:n(_).description,"onUpdate:modelValue":t[1]||(t[1]=e=>n(_).description=e),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),o(j,{class:"btns"},{default:l(()=>[o(w,{onClick:n(ae)},{default:l(()=>[x("github仓库地址")]),_:1},8,["onClick"]),o(w,{onClick:t[4]||(t[4]=e=>y(R))},{default:l(()=>[x("新建echarts option")]),_:1})]),_:1}),o(W,{modelValue:n(r),"onUpdate:modelValue":t[5]||(t[5]=e=>P(r)?r.value=e:null),type:"card",editable:"","tab-position":"bottom",onEdit:T,onTabClick:O},{default:l(()=>[(m(!0),h($,null,S(n(u),(e,E)=>(m(),U(G,{key:e.title,label:e.title,name:e.name},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),V("section",me,[(m(!0),h($,null,S(n(p),(e,E)=>(m(),h("div",{key:E,class:"echarts-demo"},[o(z,{class:"box-item",effect:"dark",content:e.title},{default:l(()=>[V("p",pe,Z(e.title),1)]),_:2},1032,["content"]),V("div",_e,[o(H,{option:e.option,onClick:fe=>y(e.optionStr)},null,8,["option","onClick"])])]))),128))])],64)}}});export{ye as default};
